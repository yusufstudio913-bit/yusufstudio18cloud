<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>YusufStudio18 Cloud</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial;background:#111;color:#fff;margin:0;text-align:center}
.card{max-width:95%;width:450px;margin:20px auto;padding:20px;background:#222;border-radius:12px;box-sizing:border-box}
input,button{padding:12px;margin:6px;border-radius:8px;border:none;font-size:16px;box-sizing:border-box;width:90%}
button{background:#00c3ff;color:#000;font-weight:bold;cursor:pointer}
button:hover{background:#10e7ff}
.previewBox{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px;margin-top:12px}
.prevItem{background:#181818;padding:6px;border-radius:10px;position:relative}
.prevItem img,video,iframe{width:100%;border-radius:10px}
.delBtn{position:absolute;top:5px;right:5px;background:#ff4040;color:#fff;border:none;padding:2px 6px;border-radius:6px;cursor:pointer;font-size:12px}
</style>
</head>
<body>

<div class="card">
<h2>YS18 Drive Panel</h2>
<input type="file" id="fileInput" multiple>
<button onclick="upload()">⬆ Yükle</button>
<div class="previewBox" id="preview"></div>
</div>

<script>
async function upload(){
  const files=document.getElementById("fileInput").files;
  const preview=document.getElementById("preview");

  for(let f of files){
    let form=new FormData();
    form.append("file", f);

    const res=await fetch("http://localhost:3000/upload",{
      method:"POST",
      body: form
    });

    const data=await res.json();
    if(data.link){
      const div=document.createElement("div");
      div.className="prevItem";
      let content="";
      if(f.type.includes("image")) content=`<img src="${data.link}">`;
      else if(f.type.includes("video")) content=`<video src="${data.link}" controls></video>`;
      else content=`<p>${data.name}</p>`;
      div.innerHTML=content+`<button class="delBtn" onclick="this.parentElement.remove()">Sil</button>`;
      preview.appendChild(div);
    }
  }
}
</script>
</body>
</html>